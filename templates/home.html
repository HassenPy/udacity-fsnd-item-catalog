{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="modal fade" tabindex="-1" role="dialog" id="deleteModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm delete</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this pick?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" data-dismiss="modal">cancel</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal" id="deleteButton">delete</button>
      </div>
    </div>
  </div>
</div>

<div class="catalog">
  <div class="categories col-xs-12 col-sm-4 col-sm-offset-0 col-md-3 col-md-offset-1">
    <h3 class="list-header">Communities</h3>
    <ul class="list">
      {% for category in categories %}
        <li class="list-item">
          <a href="{{ url_for('catalogApp.category_page', id=category.id) }}">
            {{ category.title }}
          </a>
        </li>
      {% endfor %}
      <li class="list-item">
        <a class="highlight-link" href="{{url_for('catalogApp.category_list')}}">
          All communities</a>
      </li>
    </ul>
  </div>
  <div class="items col-xs-12 col-sm-7 col-md-7">
    <h3 class="list-header">Latest posts</h3>
    <ul class="list">
      {% for item in items %}
        <li class="list-item">
          <a href="{{ item.link }}" target="_blank" rel="nofollow">
            {{ item.title }}</a>
          {% if current_user.is_authenticated and item.author == current_user.id %}
          <span>
            <a href="{{url_for('catalogApp.item_edit', id=item.id)}}">
              <i class="icon-pencil"></i>
            </a>
            <button data-href="/api/item/{{item.id}}/" class="btn-delete delete" role="button"
               data-toggle="modal" data-target="#deleteModal">
              <i class="icon-trash-empty"></i>
            </button>
          </span>
          {% endif %}
          <div>
            <time class="timeago" datetime="{{item.created}}"></time>
            <span class="author" data-author="/api/user/{{item.author}}/"></span>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}

{% block footer_scripts %}
<script src="/static/js/timeago.min.js"></script>
<script src="/static/js/main.js"></script>
{% endblock %}
